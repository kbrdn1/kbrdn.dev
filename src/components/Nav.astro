---
import i18next, { t, setDefaultNamespace } from "i18next";
import { localizePath } from "astro-i18next";
import { getPath, getPathname, getLang } from "@app/utils";

const path = getPath(Astro.request.url)
const currentPath = getPathname(Astro.request.url);
const currentLanguage = getLang();

setDefaultNamespace("nav");
const content = {
  job: t("job"),
  spec: t("spec"),
  resources: t("resources"),
  social: t("social"),
  explore: t("explore"),
  projects: t("projects"),
  blog: t("blog"),
  hire: t("hire"),
  skills: t("skills"),
  stack: t("stack"),
  now: t("now"),
  cv: t("cv"),
  languages: t("languages"),
};

import {
  Compass,
  Repository,
  Edit,
  BrainElectricity,
  Wrench,
  LeaderboardStar,
  AppleImac2021Side,
  GitHub,
  Twitter,
  LinkedIn,
  JournalPage,
  Translate,
  NavArrowLeft,
} from "iconoir-react";

import { motion } from "framer-motion";
---

<nav
  class="bg-black-2 fixed flex flex-col gap-[40px] h-screen border-r border-black-3 text-grey-1 py-[40px] px-[24px]"
>
  <a href="" class="flex gap-[12px] hover:opacity-80 duration-200 ease-out">
    <img src="/me.jpg" alt="profile-picture" class="rounded-full h-[40px]" />
    <div class="flex flex-col gap-[2px] text-[14px]">
      <p class="font-medium text-white">Kylian Bardini</p>
      <div class="w-full h-[20px] flex flex-col overflow-hidden">
        <motion.span
          client:load
          initial={{ y: 0, opacity: 1 }}
          animate={{ y: -20, opacity: 0 }}
          transition={{
            delay: 8,
            duration: 0.7,
            type: "spring",
            repeat: 999999,
            repeatType: "mirror",
            ease: "easeInOut",
            repeatDelay: 8,
            stiffness: 100,
          }}
        >
          {content.job}
        </motion.span>
        <motion.span
          client:load
          initial={{ y: 0, opacity: 0 }}
          animate={{ y: -20, opacity: 1 }}
          transition={{
            delay: 8,
            duration: 0.7,
            type: "spring",
            repeat: 999999,
            repeatType: "mirror",
            ease: "easeInOut",
            repeatDelay: 8,
            stiffness: 100,
          }}
        >
          {content.spec}
        </motion.span>
      </div>
    </div>
  </a>
  <div class="flex flex-col gap-[32px] w-full text-[14px]">
    <div class="flex flex-col gap-[2px] w-full">
      <a href="">
        <div
          class={(currentPath == ""
            ? "border border-grey-2 bg-black-3 text-white "
            : "") +
            "flex gap-[10px] items-center w-full rounded-[6px] px-[12px] py-[8px] hover:text-white duration-150 ease-out group"}
        >
          <Compass
            className="group-hover:rotate-[10deg] transition-all"
            width={20}
            height={20}
            strokeWidth="1.2"
          />
          {content.explore}
        </div>
      </a>
      <a href="">
        <div
          class={(currentPath == "projects"
            ? "border border-grey-2 bg-black-3 text-white "
            : "") +
            "flex gap-[10px] items-center w-full rounded-[6px] px-[12px] py-[8px] hover:text-white duration-150 ease-out group"}
        >
          <Repository
            className="group-hover:rotate-[10deg] transition-all"
            width={20}
            height={20}
            strokeWidth="1.2"
          />
          {content.projects}
        </div>
      </a>
      <a href={localizePath("/blog")}>
        <div
          class={(currentPath == "blog"
            ? "border border-grey-2 bg-black-3 text-white "
            : "") +
            "flex gap-[10px] items-center w-full rounded-[6px] px-[12px] py-[8px] hover:text-white duration-150 ease-out group"}
        >
          <Edit
            className="group-hover:rotate-[10deg] transition-all"
            width={20}
            height={20}
            strokeWidth="1.2"
          />
          {content.blog}
        </div>
      </a>
      <a href="">
        <div
          class={(currentPath == "contact"
            ? "border border-grey-2 bg-black-3 text-white "
            : "") +
            "flex gap-[10px] items-center w-full rounded-[6px] px-[12px] py-[8px] hover:text-white duration-150 ease-out group"}
        >
          <BrainElectricity
            className="group-hover:rotate-[10deg] transition-all"
            width={20}
            height={20}
            strokeWidth="1.2"
          />
          {content.hire}
        </div>
      </a>
    </div>
    <div class="flex flex-col gap-[2px] w-full text-[14px]">
      <div class="ml-[12px]">
        <p class="font-medium text-grey-1 text-[10px]">
          {content.resources}
        </p>
      </div>
      <a href="">
        <div
          class={(currentPath == "skills"
            ? "border border-grey-2 bg-black-3 text-white "
            : "") +
            "flex gap-[10px] items-center w-full rounded-[6px] px-[12px] py-[8px] hover:text-white duration-150 ease-out group"}
        >
          <LeaderboardStar
            className="group-hover:rotate-[10deg] transition-all"
            width={20}
            height={20}
            strokeWidth="1.2"
          />
          {content.skills}
        </div>
      </a>
      <a href="">
        <div
          class={(currentPath == "tools"
            ? "border border-grey-2 bg-black-3 text-white "
            : "") +
            "flex gap-[10px] items-center w-full rounded-[6px] px-[12px] py-[8px] hover:text-white duration-150 ease-out group"}
        >
          <Wrench
            className="group-hover:rotate-[10deg] transition-all"
            width={20}
            height={20}
            strokeWidth="1.2"
          />
          {content.stack}
        </div>
      </a>
      <a href="">
        <div
          class={(currentPath == "now"
            ? "border border-grey-2 bg-black-3 text-white "
            : "") +
            "flex gap-[10px] items-center w-full rounded-[6px] px-[12px] py-[8px] hover:text-white duration-150 ease-out group"}
        >
          <AppleImac2021Side
            className="group-hover:rotate-[10deg] transition-all"
            width={20}
            height={20}
            strokeWidth="1.2"
          />
          {content.now}
        </div>
      </a>
    </div>
    <div class="flex flex-col gap-[2px] w-full text-[14px]">
      <div class="ml-[12px]">
        <p class="font-medium text-grey-1 text-[10px]">SOCIAL</p>
      </div>
      <a href="https://github.com/kbrdn1" target="_blank">
        <div
          class="flex gap-[10px] items-center w-full rounded-[6px] px-[12px] py-[8px] hover:text-white duration-150 ease-out group"
        >
          <GitHub
            className="group-hover:rotate-[10deg] transition-all"
            width={20}
            height={20}
            strokeWidth="1.2"
          />
          GitHub
        </div>
      </a>
      <a href="https://twitter.com/kbrdn1" target="_blank">
        <div
          class="flex gap-[10px] items-center w-full rounded-[6px] px-[12px] py-[8px] hover:text-white duration-150 ease-out group"
        >
          <Twitter
            className="group-hover:rotate-[10deg] transition-all"
            width={20}
            height={20}
            strokeWidth="1.2"
          />
          Twitter
        </div>
      </a>
      <a
        href="https://www.linkedin.com//in/kylian-bardini-aa0528234/"
        target="_blank"
      >
        <div
          class="flex gap-[10px] items-center w-full rounded-[6px] px-[12px] py-[8px] hover:text-white duration-150 ease-out group"
        >
          <LinkedIn
            className="group-hover:rotate-[10deg] transition-all"
            width={20}
            height={20}
            strokeWidth="1.2"
          />
          LinkedIn
        </div>
      </a>
      <a href="">
        <div
          class="flex gap-[10px] items-center w-full rounded-[6px] px-[12px] py-[8px] hover:text-white duration-150 ease-out group"
        >
          <JournalPage
            className="group-hover:rotate-[10deg] transition-all"
            width={20}
            height={20}
            strokeWidth="1.2"
          />
          {content.cv}
        </div>
      </a>
    </div>
  </div>
  <div
    class="flex flex-col gap-[5px] cursor-pointer w-full rounded-[6px] px-[12px] py-[8px] border border-black-3 duration-150 ease-out"
  >
    <div
      id="current-language"
      class="flex items-center justify-between hover:text-white group"
    >
      <div class="flex gap-[10px] items-center">
        <Translate
          className="group-hover:rotate-[10deg] transition-all"
          width={20}
          height={20}
          strokeWidth="1.2"
        />
        {content.languages}
      </div>
      <NavArrowLeft
        className="group-focus:rotate-[-90deg] transition-all arrow"
        width={20}
        height={20}
        strokeWidth="1.2"
      />
    </div>
    <a href={localizePath(path, currentLanguage)}>
      <div
        id="translate"
        class="flex gap-[10px] items-center hover:text-white group h-0 overflow-hidden transition-all"
      >
        <Translate
          className="group-hover:rotate-[10deg] transition-all"
          width={20}
          height={20}
          strokeWidth="1.2"
        />
        {content.languages === "Français" ? "English" : "Français"}
      </div>
    </a>
  </div>
  <script>
    const translate = document.querySelector("#translate");
    const currentLanguage = document.querySelector("#current-language");
    currentLanguage?.addEventListener("click", () => {
      translate?.classList.toggle("h-0");
      currentLanguage
        ?.querySelector(".arrow")
        ?.classList.toggle("rotate-[-90deg]");
    });
  </script>
</nav>
