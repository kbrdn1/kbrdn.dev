---
import i18next, { changeLanguage, setDefaultNamespace, t } from 'i18next'
import { getArticles } from '@app/utils'
import Base from '@layouts/Base.astro'
import Contact from '@components/sections/Contact.astro'
import BigCard from '@components/cards/Big.astro'

changeLanguage('fr')

const projects = await getArticles('projects', i18next.language)
setDefaultNamespace('projects')
const content = {
  title: t('title'),
  htitle: t('htitle'),
  description: t('description'),
  ogImage: t('ogImage'),
  ogImageAlt: t('ogImageAlt'),
  contactDescription: t('home:contactDescription'),
  contactCTA: t('home:contactCTA'),
}
---

<Base
  title={content.title}
  description={content.description}
  ogImage={content.ogImage}
  ogImageAlt={content.ogImageAlt}
>
  <h1 class="text-[48px] font-semibold text-white">{content.htitle}</h1>
  <section class="w-full flex flex-col gap-[16px]">
    {
      projects.map(project => (
        <BigCard
          title={project.data.title}
          description={project.data.description}
          hero={project.data.heroImage}
          heroFormat={project.data.heroFormat}
          heroAlt={project.data.heroImageAlt}
          url={'/projects/' + project.slug}
          tags={project.data.tags}
        />
      ))
    }
  </section>
  <Contact description={content.contactDescription} Btn={content.contactCTA} />
</Base>
